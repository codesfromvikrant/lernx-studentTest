<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./styles.css" />
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&family=Montserrat:wght@200;300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <title>User SignUp</title>
</head>

<body>

  <div class="container max-w-xl mx-auto bg-gray-100 border-[#015958] border-t-4 my-12 p-16 shadow-md rounded-md">
    <h3 class="text-xl uppercase mb-4 font-extrabold text-gray-600">Sign Up For Test!</h3>

    <form id="signupform" action="" post="post" class="flex justify-start items-start gap-3 flex-col">

      <div class="flex justify-start items-start w-full flex-col gap-1">
        <label for="username">Username* :</label>
        <input type="text" name="username" class="w-full p-3 rounded-md text-sm" placeholder="Enter Your Full Name"
          required>
      </div>

      <div class="flex justify-start items-start w-full flex-col gap-1">
        <label for="email">Email* :</label>
        <input type="text" name="email" class="w-full p-3 rounded-md text-sm" placeholder="Enter Your Valid Email"
          required>
      </div>

      <div class="flex justify-start items-start w-full flex-col gap-1">
        <label for="password">Password* :</label>
        <input type="password" name="password" id="password" class="w-full p-3 rounded-md text-sm"
          placeholder="Enter your Password" required>
      </div>

      <div class="flex justify-start items-start w-full flex-col gap-1">
        <label for="confirm-password">Confirm Password* :</label>
        <input type="password" name="confirm-password" id="confirm-password" class="w-full p-3 rounded-md text-sm"
          placeholder="Enter your Password" required>
        <p id="password-error" class="text-sm text-red-600 font-semibold"></p>
      </div>

      <input type="submit" class="bg-[#015958] mt-6 text-white font-medium shadow-md cursor-pointer py-2 px-10 rounded"
        value="Submit">
    </form>
  </div>

  <script>
    const form = document.getElementById('signupform');
    const inputs = document.querySelectorAll('input');
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirm-password');

    form.addEventListener('submit', function (e) {
      e.preventDefault();

      if (password.value != confirmPassword.value) {
        document.getElementById('password-error').innerText = 'Password does not match! Confirm the password again.'
      } else {
        fetch('user.php', {
          body: new FormData(form),
          method: 'post'
        })
          .then(response => {
            // changing url location to test page 
            window.location.href = 'studenttest.html';

            // changing value of all input field to ''
            for (let i = 0; i < inputs.length; i++) {
              inputs[i].value = '';
              console.log(inputs[i])
            }
          })
          .catch(error => {
            console.error(error);
          });
      }
    })
  </script>

</body>

</html>